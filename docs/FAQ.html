<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Frequently Asked Questions (FAQ) • pmwg</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css"><script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet"><script src="pkgdown.js"></script><meta property="og:title" content="Frequently Asked Questions (FAQ)"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-title-body">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">pmwg</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="articles/pmwg.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="FAQ.html">FAQ</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="dropdown-header">Releases</li>
    <li>
      <a href="https://newcastlecl.github.io/2021/02/10/PMWG-version-0.2.0-released.html" class="external-link">pmwg 0.2.0</a>
    </li>
    <li class="divider">
    <li>
      <a href="news/index.html">Changelog</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/university-of-newcastle-research/pmwg/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
    <div class="page-header">
      <h1>Frequently Asked Questions (FAQ)</h1>
    </div>

<div id="frequently-asked-questions-faq" class="section level1">
<ul><li>
<a href="#general-questions">General Questions</a><ul><li><a href="#i've-found-a-problem-with-the-package,-what-now?">I’ve found a problem with the package, what now?</a></li></ul></li>
<li>
<a href="#data-problems">Data Problems</a><ul><li><a href="#my-data-are-very-complex,-is-there-any-way-they-can-be-stored-as-a-list?">My data are very complex, is there any way they can be stored as a list?</a></li>
<li>
<a href="#i'm-getting-a-very-low-acceptance-rate,-how-can-i-check-acceptance-for-each-subject?">I’m getting a very low acceptance rate, how can I check acceptance for each subject?</a> ## General Questions</li>
</ul></li>
</ul><div class="section level3">
<h3 id="ive-found-a-problem-with-the-package-what-now">I’ve found a problem with the package, what now?<a class="anchor" aria-label="anchor" href="#ive-found-a-problem-with-the-package-what-now"></a></h3>
<p>Head over to the <a href="https://github.com/university-of-newcastle-research/pmwg/issues" class="external-link">Issues</a> page and ask a question, suggest a new feature or report a bug.</p>
</div>
<div class="section level2">
<h2 id="data-problems">Data Problems<a class="anchor" aria-label="anchor" href="#data-problems"></a></h2>
<div class="section level3">
<h3 id="my-data-are-very-complex-is-there-any-way-they-can-be-stored-as-a-list">My data are very complex, is there any way they can be stored as a list?<a class="anchor" aria-label="anchor" href="#my-data-are-very-complex-is-there-any-way-they-can-be-stored-as-a-list"></a></h3>
<p>If your data is particularly complex and you currently have it saved as a list then the following conversion should move it into a <code>pmwg</code> compatible format.</p>
<p>In this first case you start with a list of subjects, and each subject has one or more data objects associated with it.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>    <span class="co"># Play data - a list of data.frames associated with subject names in this case - but each list item should be able to be any object</span></span>
<span>    <span class="va">data_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>subject1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'high'</span>, <span class="st">'low'</span><span class="op">)</span>, meanrt <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.8</span>, <span class="fl">1.4</span><span class="op">)</span><span class="op">)</span>, subject2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'high'</span>, <span class="st">'low'</span><span class="op">)</span>, meanrt <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.9</span>, <span class="fl">1.1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="co"># Turn that list into a tibble, which preserves the internal data.frame objects</span></span>
<span>    <span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span>subject <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">data_list</span><span class="op">)</span>, df <span class="op">=</span> <span class="va">data_list</span><span class="op">)</span></span>
<span>    <span class="co"># Alternatively, use the I() function to interpret the list elements as is</span></span>
<span>    <span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>subject <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">data_list</span><span class="op">)</span>, df <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span><span class="va">data_list</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="co"># Then pass the data.frame/tibble as documented to the pmwgs object, and run your sampling stages.</span></span>
<span></span>
<span>    <span class="co"># The data passed into your log likelihood function would have the following form: (basically the output from either of the last two links above)</span></span>
<span>    <span class="co"># # A tibble: 1 x 2</span></span>
<span>    <span class="co">#   subject df              </span></span>
<span>    <span class="co">#   &lt;chr&gt;   &lt;named list&gt;    </span></span>
<span>    <span class="co"># 1 subject1 &lt;df[,2] [2 × 2]&gt;</span></span>
<span>    <span class="co"># So you will also need to extract the internal data.frame or other object in your log likelihood function, using something like:</span></span>
<span>    <span class="va">df</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">$</span><span class="va">df</span><span class="op">[[</span><span class="va">data</span><span class="op">$</span><span class="va">subject</span><span class="op">]</span><span class="op">]</span></span>
<span>    <span class="co"># Then you can work with the data.frame (or whever format your list elements are) from there within the rest of your log-likelihood function.</span></span></code></pre></div>
<p>Alternatively if you have a list of studies, and each study has a subject column you can follow the following format to make your dataset compatible with <code>pmwg</code></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>    <span class="co"># Play data - a list of data.frames associated with task names in this case.</span></span>
<span>    <span class="va">data_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>task1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>subject <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'A'</span>, <span class="st">'B'</span><span class="op">)</span>, meanrt <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.8</span>, <span class="fl">1.4</span><span class="op">)</span><span class="op">)</span>, task2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>subject <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'A'</span>, <span class="st">'B'</span><span class="op">)</span>, meanrt <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.9</span>, <span class="fl">1.1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="co"># We'll use this helper function to split a larger tibble by subject</span></span>
<span>    <span class="va">split_tibble</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">x</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/split.html" class="external-link">split</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">x</span><span class="op">$</span><span class="va">task</span><span class="op">)</span></span>
<span>      <span class="op">}</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>    <span class="co"># Now we can rearrange the data_list above to be in the correct format. We first bind our list to a new data.frame with a task column, then split it by subject to get our top level subject column.</span></span>
<span>    <span class="co"># Then we turn this list from the split operation into a tibble and turn each list in the df column to be a named list with the names representing the different tasks</span></span>
<span>    <span class="va">data</span> <span class="op">&lt;-</span> <span class="va">data_list</span> <span class="op">%&gt;%</span></span>
<span>      <span class="fu">bind_rows</span><span class="op">(</span>.id <span class="op">=</span> <span class="st">"task"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/split.html" class="external-link">split</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">subject</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>      <span class="fu">tibble</span><span class="op">(</span>subject <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span>, df <span class="op">=</span> <span class="va">.</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>      <span class="fu">mutate</span><span class="op">(</span>df <span class="op">=</span> <span class="fu">split_tibble</span><span class="op">(</span><span class="va">df</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># The data passed into your log likelihood function would have the following form: (basically the output from either of the last two links above)</span></span>
<span>    <span class="co"># # A tibble: 1 x 2</span></span>
<span>    <span class="co">#   subject df</span></span>
<span>    <span class="co">#   &lt;chr&gt;   &lt;named list&gt;</span></span>
<span>    <span class="co"># 1 A       &lt;named list [2]&gt;</span></span>
<span>    <span class="co"># So you will also need to extract the internal named list or other object in your log likelihood function, using something like:</span></span>
<span>    <span class="va">data</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">$</span><span class="va">df</span><span class="op">[[</span><span class="va">data</span><span class="op">$</span><span class="va">subject</span><span class="op">]</span><span class="op">]</span></span>
<span>    <span class="co"># From this point you can calculate the likelihood for task1 using the data.frame data$task1, and similarly for task2 and then sum the log-likelihoods to get the joint likelihood value to return to pmwg</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="im-getting-a-very-low-acceptance-rate-how-can-i-check-acceptance-for-each-subject">I’m getting a very low acceptance rate, how can I check acceptance for each subject?<a class="anchor" aria-label="anchor" href="#im-getting-a-very-low-acceptance-rate-how-can-i-check-acceptance-for-each-subject"></a></h3>
<p>If you are getting low acceptance rates (as displayed in the progress bar) sometimes this could be caused by one or two participant datasets.</p>
<p>The internal function <code>accept_rate</code> will return an array of mean acceptance rates, where the acceptance rate is the number of new, unique, particles accepted by the sampler</p>
<p>The default is to calculate this mean over the last 200 samples (or as many samples as exist if fewer than 200). The following two calls show how to do this for a custom window, or for all samples.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>    <span class="co"># For a sampled object called sampler</span></span>
<span>    <span class="fu">pmwg</span><span class="fu">:::</span><span class="fu"><a href="reference/accept_rate.html">accept_rate</a></span><span class="op">(</span><span class="va">sampler</span>, window_size<span class="op">=</span><span class="fl">500</span><span class="op">)</span></span>
<span>    <span class="co"># For all samples</span></span>
<span>    <span class="fu">pmwg</span><span class="fu">:::</span><span class="fu"><a href="reference/accept_rate.html">accept_rate</a></span><span class="op">(</span><span class="va">sampler</span>, window_size<span class="op">=</span><span class="va">sampler</span><span class="op">$</span><span class="va">samples</span><span class="op">$</span><span class="va">idx</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>

</div>



      <footer><div class="copyright">
  <p></p><p>Developed by Gavin Cooper, Reilly Innes, Caroline Kuhne, Jon-Paul Cavallaro, David Gunawan, Guy Hawkins, Scott Brown, Niek Stevenson.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

